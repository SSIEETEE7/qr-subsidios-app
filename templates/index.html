<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mercados que renacen: Puebla Vive</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script>
    // Muestra los mercados según el municipio seleccionado
    const mercadosPorMunicipio = {{ mercados|tojson }};
    function actualizarMercados() {
      const municipio = document.getElementById('municipio').value;
      const mercadoSelect = document.getElementById('mercado');
      mercadoSelect.innerHTML = '<option value="">Selecciona un mercado</option>';
      if (mercadosPorMunicipio[municipio]) {
        mercadosPorMunicipio[municipio].forEach(m => {
          const opt = document.createElement('option');
          opt.value = m;
          opt.textContent = m;
          mercadoSelect.appendChild(opt);
        });
      }
    }
  </script>
</head>
<body>

  <header class="hero-full" style="background-image: url('{{ url_for('static', filename='img/hero_mercado.jpg') }}');">
    <div class="hero-content">
      <img src="{{ url_for('static', filename='img/logo_puebla.png') }}" alt="Gobierno de Puebla" class="logo" style="margin-bottom: 1rem;">
      <h1>Mercados que renacen</h1>
      <p>Puebla Vive</p>
    </div>
  </header>

  <section class="selector-municipio">
    <form method="POST" action="{{ url_for('mercados_view') }}">
      <label for="municipio">Selecciona un municipio:</label>
      <select id="municipio" name="municipio" onchange="actualizarMercados()" required>
        <option value="">Selecciona un municipio</option>
        {% for municipio in mercados.keys() %}
          <option value="{{ municipio }}">{{ municipio }}</option>
        {% endfor %}
      </select>

      <label for="mercado">Selecciona un mercado:</label>
      <select id="mercado" name="mercado" required>
        <option value="">Selecciona un mercado</option>
      </select>

      <button type="submit">Ver productos</button>
    </form>
  </section>

  <footer>
    © 2025 Mercados que renacen: Puebla Vive · Gobierno del Estado de Puebla
  </footer>

</body>
</html>
